@using SmartSaver.Presentation.Shared.Breadcrumbs                                 

@inherits LayoutComponentBase

@inject HttpClient Http
@inject NavigationManager NavigationManager

@using SmartSaver.Presentation.Shared.LoadingSpinner


@if (!_isLoading)
{
    <div class="sidebar">
        <NavMenu />
    </div>
}

<div class="main">
    <Breadcrumbs />
    <div class="content px-4">
        @if (_isLoading)
        {
            <LoadingSpinner />
        }
        else
        {
            @Body
        }
    </div>
</div>


@code {
    private bool _isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            await Http.GetAsync("https://localhost:44301");

            _isLoading = false;
        }
        catch (Exception)
        {
            NavigationManager.NavigateTo("/error");
        }

    }
}